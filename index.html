<!doctype html>
<html lang="ar">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>منتج — صفحة الطلب</title>
<style>
body {font-family: Arial, sans-serif; margin:0; background:#f4f6f8; color:#111; direction:rtl; text-align:right;}
.container {max-width:1100px; margin:20px auto; display:grid; grid-template-columns:1fr 360px; gap:20px;}
.card {background:#fff; border-radius:10px; padding:18px; box-shadow:0 6px 20px rgba(2,6,23,.06);}
.breadcrumbs {font-size:13px; color:#6b7280; margin-bottom:8px;}
.product-grid {display:grid; grid-template-columns:420px 1fr; gap:18px;}
.gallery {display:flex; flex-direction:column; gap:10px;}
.main-img {width:100%; height:360px; border-radius:8px; overflow:hidden; display:flex; align-items:center; justify-content:center; background:#f0f2f5;}
.main-img img {max-width:100%; max-height:100%; object-fit:contain;}
.thumbs {display:flex; gap:8px; margin-top:6px;}
.thumbs img {width:64px; height:64px; object-fit:cover; border-radius:6px; border:1px solid #e6e9ee; cursor:pointer;}
.details h1 {font-size:20px; margin:0 0 8px;}
.details h2 {font-size:16px; margin:0 0 12px;}
.price-row {display:flex; gap:12px; align-items:center; margin-bottom:12px;}
.price {font-size:26px; font-weight:700; color:#111;}
.buy-actions {display:flex; gap:10px; margin-bottom:12px;}
.btn {padding:12px 14px; border-radius:8px; border:0; font-weight:700; cursor:pointer;}
.btn-primary {background:#ff4500; color:#fff;}

/* Modal */
.modal {display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,.5); justify-content:center; align-items:center; z-index:1000;}
.modal-content {background:#fff; padding:20px; border-radius:10px; width:90%; max-width:500px; position:relative;}
.close {position:absolute; top:10px; left:10px; font-size:20px; cursor:pointer;}
label {display:block; margin-top:10px; font-weight:600;}
input, select {width:100%; padding:8px; margin-top:4px; border:1px solid #ccc; border-radius:6px;}
.confirm-btn {background:#ff4500; color:#fff; width:100%; margin-top:12px; padding:12px; border-radius:6px; border:none; font-weight:700; cursor:pointer;}
.thank {display:none; margin-top:20px; font-size:18px; font-weight:700; color:green;}
@media(max-width:980px){.container{grid-template-columns:1fr;} .main-img{height:300px;}}
</style>
</head>
<body>

<div class="container">
  <section>
    <div class="card">
      <div class="breadcrumbs">قطع غيار السيارة > أجزاء داخلية</div>
      <div class="product-grid">
        <div class="gallery">
          <div class="main-img" id="mainImg">
            <img id="currentImage" src="https://raw.githubusercontent.com/mounibbtm/Mounib-ite/2d08768b2f8850291703bf6c1fa7637a31eca736/pppppppppppppppppppp.png" alt="صورة المنتج">
          </div>
          <div class="thumbs" id="thumbs">
            <img src="https://raw.githubusercontent.com/mounibbtm/Mounib-ite/2d08768b2f8850291703bf6c1fa7637a31eca736/pppppppppppppppppppp.png" data-src="https://raw.githubusercontent.com/mounibbtm/Mounib-ite/2d08768b2f8850291703bf6c1fa7637a31eca736/pppppppppppppppppppp.png" alt="رئيسية">
            <img src="https://raw.githubusercontent.com/mounibbtm/Mounib-ite/7e9bd891714660094d357a4d32faa67f07869540/7f147342-51b2-42a2-b54f-07912fe9c537.jpeg" data-src="https://raw.githubusercontent.com/mounibbtm/Mounib-ite/7e9bd891714660094d357a4d32faa67f07869540/7f147342-51b2-42a2-b54f-07912fe9c537.jpeg" alt="صغير 1">
            <img src="https://raw.githubusercontent.com/mounibbtm/Mounib-ite/7e9bd891714660094d357a4d32faa67f07869540/7fb07d8e-8990-424d-86b1-1b8e2b7dbcdd.png" data-src="https://raw.githubusercontent.com/mounibbtm/Mounib-ite/7e9bd891714660094d357a4d32faa67f07869540/7fb07d8e-8990-424d-86b1-1b8e2b7dbcdd.png" alt="صغير 2">
            <img src="https://raw.githubusercontent.com/mounibbtm/Mounib-ite/7e9bd891714660094d357a4d32faa67f07869540/s-l1600%20(1).webp" data-src="https://raw.githubusercontent.com/mounibbtm/Mounib-ite/7e9bd891714660094d357a4d32faa67f07869540/s-l1600%20(1).webp" alt="صغير 3">
          </div>
        </div>

        <div class="details">
          <h1>مقبض تعديل مقعد السيارة</h1>
          <h2>خاص بسيارات VW / SEAT / AUDI / SKODA</h2>
          <div class="price-row">
            <div class="price">DZ1500</div>
          </div>
          <div class="buy-actions">
            <button class="btn btn-primary" id="orderBtn">أطلب الآن</button>
          </div>
        </div>

      </div>
    </div>
  </section>
</div>

<!-- Modal Form -->
<div class="modal" id="orderModal">
  <div class="modal-content">
    <span class="close" id="closeModal">&times;</span>
    <h2>بيانات الطلب</h2>
    <label>الإسم الكامل</label>
    <input type="text" id="fullName" placeholder="أدخل إسمك الكامل">
    <label>الولاية</label>
    <select id="wilaya"><option value="">اختر الولاية</option></select>
    <label>البلدية</label>
    <select id="commune"><option value="">اختر البلدية</option></select>
    <label>رقم الهاتف</label>
    <input type="text" id="phone" placeholder="أدخل رقم الهاتف">
    <label>التوصيل إختياري</label>
    <select id="delivery">
      <option value="600">لباب الدار - 600دج</option>
      <option value="400">للمكتب - 400دج</option>
    </select>
    <button class="confirm-btn" id="confirmOrder">تأكيد الطلبية</button>
    <div class="thank" id="thankMsg">شكراً على ثقتك!</div>
  </div>
</div>

<script>
// Gallery
document.querySelectorAll('#thumbs img').forEach(img=>{
  img.addEventListener('click',()=>{ document.getElementById('currentImage').src = img.dataset.src; });
});

// Modal
const orderBtn = document.getElementById('orderBtn');
const modal = document.getElementById('orderModal');
const closeModal = document.getElementById('closeModal');
const confirmOrder = document.getElementById('confirmOrder');
const thankMsg = document.getElementById('thankMsg');

orderBtn.onclick = ()=> modal.style.display='flex';
closeModal.onclick = ()=> modal.style.display='none';
window.onclick = (e)=> { if(e.target==modal) modal.style.display='none'; }

// Wilayas et communes
const wilayas = {
<select id="wilaya" onchange="loadCommunes()">
  <option value="">اختر الولاية</option>
</select>

<select id="commune">
  <option value="">اختر البلدية</option>
</select>

<script>
  // تحميل بيانات الولايات
  fetch('data/wilayas.json')
    .then(response => response.json())
    .then(data => {
      const wilayaSelect = document.getElementById('wilaya');
      data.forEach(wilaya => {
        const option = document.createElement('option');
        option.value = wilaya.code;  // الكود تاع الولاية
        option.textContent = wilaya.name_ar;  // الاسم بالعربية
        wilayaSelect.appendChild(option);
      });
    });

  // تحميل البلديات حسب الولاية المختارة
  function loadCommunes() {
    const wilayaCode = document.getElementById('wilaya').value;
    fetch('data/communes.json')
      .then(response => response.json())
      .then(data => {
        const communeSelect = document.getElementById('commune');
        communeSelect.innerHTML = '<option value="">اختر البلدية</option>';
        data
          .filter(commune => commune.wilaya_code === wilayaCode)
          .forEach(commune => {
            const option = document.createElement('option');
            option.value = commune.code;
            option.textContent = commune.name_ar;
            communeSelect.appendChild(option);
          });
      });
  }
</script>

const wilayaSelect = document.getElementById('wilaya');
const communeSelect = document.getElementById('commune');

// remplir wilayas
for(let w in wilayas){
  let option = document.createElement('option');
  option.value=w; option.textContent=w;
  wilayaSelect.appendChild(option);
}

// changer communes
wilayaSelect.onchange = ()=>{
  communeSelect.innerHTML = '<option value="">اختر البلدية</option>';
  const communes = wilayas[wilayaSelect.value] || [];
  communes.forEach(c=>{
    let opt = document.createElement('option');
    opt.value=c; opt.textContent=c;
    communeSelect.appendChild(opt);
  });
}

// Confirmation
confirmOrder.onclick = ()=>{
  const name = document.getElementById('fullName').value.trim();
  const wil = wilayaSelect.value;
  const com = communeSelect.value;
  const phone = document.getElementById('phone').value.trim();
  const delivery = document.getElementById('delivery').value;

  if(!name || !wil || !com || !phone){
    alert('يرجى ملء جميع الحقول!');
    return;
  }

  thankMsg.style.display='block';
  setTimeout(()=>{
    modal.style.display='none';
    thankMsg.style.display='none';
    document.getElementById('fullName').value='';
    wilayaSelect.value=''; 
    communeSelect.innerHTML='<option value="">اختر البلدية</option>';
    document.getElementById('phone').value='';
    document.getElementById('delivery').value='600';
  },2000);
}
</script>

</body>
</html>
